<!DOCTYPE html>
<html>
<head>
  <title>p5 D3 Cookbook</title>

  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.5/p5.js"></script>
  <script type="text/javascript">
    //Using D3 scales in p5.js
    //p5 D3 Cookbook

    /*
    D3 scales can be used directly in p5 sketches. D3 scales offer a range of interpolation options. These include interpolating colors and multi-step scales.

    CodePen: http://codepen.io/SciutoAlex/pen/warmoy
    D3 Reference: https://github.com/mbostock/d3/wiki/Quantitative-Scales
    */
    function setup() {
      
      //Create the p5 canvas
      var width = 500,
          height = 300,
          margin = 30;
      
      createCanvas(width + margin*2, height + margin*2);
      stroke("#fff");
      
      //Set the output range of the different scales.
      var radius = 10,
          maxRadius = 70
          startColor = "#033E8C",
          midColor = "#00D96F";
          endColor = "#F2B705";
      
      
      /*
      Create the three different scales used in this example. Each scale returns a function. So the variable d3xScale can be used as if it were a function such as d3xScale(.5)
      */
      var d3xScale = d3.scale.linear()
        .domain([0,1])
        .range([margin,margin+width]);
      
      var d3colorScale = d3.scale.linear()
        .domain([0,.5,1])
        .range([startColor,midColor,endColor]);
      
      var d3radiusScale = d3.scale.linear()
        .domain([0,1])
        .range([radius,maxRadius]);

      /*
      Create a for loop and draw an ellipse using p5's drawing syntax.
      */
      for(var i = 0; i < 1; i += .01) {
        var scaledX = d3xScale(i);
        var scaledColor = d3colorScale(i);
        var scaledRadius = d3radiusScale(i);
        fill(scaledColor);
        ellipse(scaledX, maxRadius, scaledRadius, scaledRadius);
      }
      
      //Add a title
      fill('#000');
      noStroke();
      textSize(15);
      text("Using D3.js scales in a p5 sketch", 30, 30);
    }

  </script>
</head>
<body>

</body>
</html>